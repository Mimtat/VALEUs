
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Organization Map with Filters</title>
  
  <!-- Mapbox GL JS Library (REQUIRED) -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />

  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.16.1/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.16.1/mapbox-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    #legend {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 10px;
      font-family: sans-serif;
      font-size: 13px;
      border-radius: 4px;
      box-shadow: 0 0 5px rgba(0,0,0,0.2);
      max-height: 90vh;
      overflow-y: auto;
    }
    .mapboxgl-popup-content { font: 12px/1.5 sans-serif; }
  </style>
</head>
<body>
<div id="map"></div>
<div id="legend">
  <strong>Filter by Category</strong><br>
  <label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='Democracy' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #3b82f6; display: inline-block; margin-right: 6px;'></span>Democracy</label><label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='Human/Fundamental Rights' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #22c55e; display: inline-block; margin-right: 6px;'></span>Human/Fundamental Rights</label><label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='Migration' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #ef4444; display: inline-block; margin-right: 6px;'></span>Migration</label><label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='Trade/Economy' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #f59e0b; display: inline-block; margin-right: 6px;'></span>Trade/Economy</label><label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='Trade/economy' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #a855f7; display: inline-block; margin-right: 6px;'></span>Trade/economy</label><label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='conflict/war' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #06b6d4; display: inline-block; margin-right: 6px;'></span>conflict/war</label><label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='digital media' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #10b981; display: inline-block; margin-right: 6px;'></span>digital media</label><label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='energy/climate/sustainability' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #e11d48; display: inline-block; margin-right: 6px;'></span>energy/climate/sustainability</label><label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='human/fundamental rights' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #8b5cf6; display: inline-block; margin-right: 6px;'></span>human/fundamental rights</label><label style='display: flex; align-items: center; margin-bottom: 5px;'><input type='checkbox' class='cat-filter' data-cat='Other' checked style='margin-right: 5px;'><span style='width: 12px; height: 12px; background: #8e8e8e; display: inline-block; margin-right: 6px;'></span>Other</label>
</div>
<script>
mapboxgl.accessToken = 'YOUR_MAPBOX_ACCESS_TOKEN';

const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v11',
    center: [15, 40],
    zoom: 1.5,
    projection: 'globe'
});

map.on('style.load', () => {
    map.setFog({});
});

const geojson = {"type": "FeatureCollection", "features": [{"type": "Feature", "geometry": {"type": "Point", "coordinates": [32.8541, 39.9208]}, "properties": {"organization": "The Association of Civil Society Development Center", "website": "https://www.sivilsesler.org/", "city": "Ankara", "action_domains": "Trade/Economy", "main_category": "Trade/Economy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [28.9784, 41.0082]}, "properties": {"organization": "Turkish Economic and Social Studies Foundation", "website": "https://www.tesev.org.tr/en/home/", "city": "Istanbul", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [28.9784, 41.0082]}, "properties": {"organization": "ECONOMIC DEVELOPMENT FOUNDATION", "website": "https://www.ikv.org.tr/ikv.asp?ust_id=2&id=10", "city": "Istanbul", "action_domains": "Trade/Economy", "main_category": "Trade/Economy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [28.9784, 41.0082]}, "properties": {"organization": "Hrant Dink Foundation", "website": "https://hrantdink.org/en/", "city": "Istanbul", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [4.3517, 50.8503]}, "properties": {"organization": "Tepsa", "website": "https://tepsa.eu/", "city": "Brussels", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [4.3517, 50.8503]}, "properties": {"organization": "Demsoc", "website": "https://www.demsoc.org/", "city": "Brussels", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [0.007709, 38.8816]}, "properties": {"organization": "Ashoka", "website": "https://www.ashoka.org/en-us", "city": "Arlington, VA", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [29.9187, 31.2001]}, "properties": {"organization": "Crude Accountability", "website": "https://crudeaccountability.org/", "city": "Alexandria", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3522, 48.8566]}, "properties": {"organization": "attac", "website": "www.attac.de - Attac Deutschland - www.attac.de", "city": "Paris", "action_domains": "Trade/Economy", "main_category": "Trade/Economy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Fridays for future", "website": "https://fridaysforfuture.de/", "city": "Berlin", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Democracy Otwarty Dialog Foundation (Open Dialogue Foundation):", "website": "https://en.odfoundation.eu/", "city": "Warsaw", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Batory Foundation", "website": "https://www.batory.org.pl/en/", "city": "Warsaw", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Fundacja Rozwoju Demokracji Lokalnej (Foundation for the Development of Local Democracy)", "website": "https://frdl.org.pl/", "city": "Warsaw", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Institute of Public Affairs (ISP)", "website": "https://www.isp.org.pl/en/about-us", "city": "Warsaw", "action_domains": "Trade/Economy", "main_category": "Trade/Economy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "CASE \u00e2\u0080\u0093 Center for Social and Economic Research", "website": "CASE \u00e2\u0080\u0093 Center for Social and Economic Research", "city": "Warsaw", "action_domains": "Trade/Economy", "main_category": "Trade/Economy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.9945, 50.0647]}, "properties": {"organization": "Polish Green Network", "website": "https://zielonasiec.pl/en/home-2/", "city": "Krakow", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "ClientEarth Poland", "website": "https://www.clientearth.pl/", "city": "Warsaw", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Polska Akcja Humanitarna (PAH)", "website": "https://www.pah.org.pl/", "city": "Warsaw", "action_domains": "conflict/war", "main_category": "conflict/war"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Fundacja Ocalenie", "website": "https://ocalenie.org.pl/", "city": "Warsaw", "action_domains": "Migration", "main_category": "Migration"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Stowarzyszenie Interwencji Prawnej", "website": "https://interwencjaprawna.pl/", "city": "Warsaw", "action_domains": "Migration", "main_category": "Migration"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Helsinki Foundation for Human Rights (HFHR)", "website": "https://hfhr.pl/en", "city": "Warsaw", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Amnesty International Poland", "website": "https://www.amnesty.org/en/location/europe-and-central-asia/western-central-and-south-eastern-europe/poland/", "city": "Warsaw", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Campaign Against Homophobia (KPH)", "website": "https://kph.org.pl/en/", "city": "Warsaw", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.2558, 43.7696]}, "properties": {"organization": "COSPE", "website": "https://www.cospe.org/", "city": "Florence", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.3426, 44.4949]}, "properties": {"organization": "Amnesty International Fierenze", "website": "https://amnestyfirenze.wordpress.com/", "city": "Bologna", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.2558, 43.7696]}, "properties": {"organization": "ARCIGAY", "website": "https://www.arcigayfirenze.it/", "city": "Florence", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [4.3517, 50.8503]}, "properties": {"organization": "IREO", "website": "https://www.ireo.eu/", "city": "Brussels", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.2558, 43.7696]}, "properties": {"organization": "IREOS", "website": "https://www.ireos.org/", "city": "Florence", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [12.4964, 41.9028]}, "properties": {"organization": "Italiani senza cittadinanza", "website": "Movimento Italiani senza cittadinanza", "city": "Rome", "action_domains": "Migration", "main_category": "Migration"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.2558, 43.7696]}, "properties": {"organization": "Black History Month Florence", "website": "http://www.blackhistorymonthflorence.com/", "city": "Florence", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [0.000919, 45.4642]}, "properties": {"organization": "Italian Climate Network", "website": "https://www.italiaclima.org/en/home_en/", "city": "Milan", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.2558, 43.7696]}, "properties": {"organization": "Legambiente Firenze", "website": "https://www.legambientefirenze.it/", "city": "Florence", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.1833, 43.7576]}, "properties": {"organization": "Rete Semi Rurali", "website": "https://rsr.bio/", "city": "Scandicci", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.2558, 43.7696]}, "properties": {"organization": "Florence Must Act", "website": "https://firenzeurbanlifestyle.com/florence-must-act-un-gommone-in-arno-per-richiedere-accoglienza-per-tutti/", "city": "Florence", "action_domains": "Migration", "main_category": "Migration"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [10.4017, 43.7228]}, "properties": {"organization": "Casa della Donna Fierenze", "website": "https://www.comune.fi.it/comunicati-stampa/firenze-ha-la-sua-la-casa-delle-donne", "city": "Pisa", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.2558, 43.7696]}, "properties": {"organization": "Nostros para Ellas A.C.", "website": "https://www.girlsnotbrides.org/our-partnership/member-directory/nosotras-para-ellas-ac/", "city": "Florence", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [12.4964, 41.9028]}, "properties": {"organization": "EuropaNow", "website": "https://www.europanow.eu/", "city": "Rome", "action_domains": "conflict/war", "main_category": "conflict/war"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [23.7275, 37.9838]}, "properties": {"organization": "Europe Must Act", "website": "https://www.europemustact.org/", "city": "Athens", "action_domains": "Migration", "main_category": "Migration"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [13.3615, 38.1157]}, "properties": {"organization": "From the Sea to the City \u00e2\u0080\u0093 \u00e2\u0080\u009cA consortium of civil society organizations for a welcoming Europe\u00e2\u0080\u009d", "website": "https://fromseatocity.eu/", "city": "Palermo", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [7.7174, 44.8462]}, "properties": {"organization": "Recosol (Rete dei Comuni Solidali Italy)", "website": "https://www.comunitasolidali.org/", "city": "Carmagnola", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [4.3517, 50.8503]}, "properties": {"organization": "Eastern Partnership Civil Society Forum", "website": "https://eap-csf.eu/", "city": "Brussels", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [76.8512, 4.3222]}, "properties": {"organization": "Legal Policy Research Center", "website": "lprc.kz", "city": "Almaty", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.0767, 49.4521]}, "properties": {"organization": "Alliance against right-wing extremism in Nuremberg (Allianz gegen Rechtsextremismus N\u00c3\u00bcrnberg)", "website": "https://www.allianz-gegen-rechtsextremismus.de/", "city": "Nuremberg", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Antifaschists Germany", "website": "https://antifascisteurope.org/germany/", "city": "Berlin", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Amnesty International", "website": "https://www.amnesty.de/", "city": "Berlin", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Civil Development Forum Foundation (Fundacja Forum Rozwoju Obywatelskiego)", "website": "https://wolnagospodarka.pl/en/what-we-do/forum-obywatelskiego-rozwoju/", "city": "Warsaw", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "ePa\u00c5\u0084stwo Foundation (Fundacja ePa\u00c5\u0084stwo)", "website": "https://mojepanstwo.pl/fundacja", "city": "Warsaw", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Amnesty InternationalPoland", "website": "Amnesty International - Bronimy praw cz\u00c5\u0082owieka", "city": "Warsaw", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Batory Foundation (Fundacja Batorego)", "website": "https://www.batory.org.pl/en/", "city": "Warsaw", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Helsinki Foundation for Human Rights (Helsi\u00c5\u0084ska Fundacja Praw Cz\u00c5\u0082owieka HFPC)", "website": "https://hfhr.pl/en", "city": "Warsaw", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Panoptykon Foundation (Fundacja Panoptykon)", "website": "https://en.panoptykon.org/", "city": "Warsaw", "action_domains": "digital media", "main_category": "digital media"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Digital Center Foundation (Fundacja Centrum Cyfrowe)", "website": "https://centrumcyfrowe.pl/en/homepage/", "city": "Warsaw", "action_domains": "digital media", "main_category": "digital media"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Polish Chamber of Information Technology and Telecommunications (Polska Izba Informatyki i Telekomunikacji PIIT)", "website": "https://www.piit.org.pl/", "city": "Warsaw", "action_domains": "digital media", "main_category": "digital media"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Ameryka\u00c5\u0084ska Izba Handlowa w Polsce (Ameryka\u00c5\u0084ska Izba Handlowa w Polsce)", "website": "https://amcham.pl/", "city": "Warsaw", "action_domains": "Trade/Economy", "main_category": "Trade/Economy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [19.0402, 47.4979]}, "properties": {"organization": "European Roma Rights Center", "website": "https://www.errc.org/", "city": "Budapest", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [-7.4006, 40.7128]}, "properties": {"organization": "Human Rights First", "website": "https://humanrightsfirst.org/", "city": "New York City", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Campaign Against Homophobia (Kampania Przeciw Homofobii)", "website": "https://kph.org.pl/", "city": "Warsaw", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.9603, 50.9375]}, "properties": {"organization": "Central Council for Muslims in Germany", "website": "https://zentralrat.de/3037.php", "city": "Cologne", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Central Council of Jews in Germany", "website": "https://www.zentralratderjuden.de/", "city": "Berlin", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [18.0686, 59.3293]}, "properties": {"organization": "Civil Rights Defenders", "website": "https://crd.org/", "city": "Stockholm", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [12.5683, 55.6761]}, "properties": {"organization": "Danish Refugee Council (Dansk Flygtningehj\u00c3\u00a6lp)", "website": "https://drc.ngo/", "city": "Copenhagen", "action_domains": "Migration", "main_category": "Migration"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [12.5683, 55.6761]}, "properties": {"organization": "CEPOS", "website": "https://cepos.dk/english/", "city": "Copenhagen", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [16.3738, 48.2082]}, "properties": {"organization": "Association of European Journalists", "website": "https://aej.org/", "city": "Vienna", "action_domains": "digital media", "main_category": "digital media"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [4.3517, 50.8503]}, "properties": {"organization": "European Federation of Journalists", "website": "https://europeanjournalists.org/", "city": "Brussels", "action_domains": "digital media", "main_category": "digital media"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [19.0402, 47.4979]}, "properties": {"organization": "Federation of Hungarian Jewish Communities (Magyarorsz\u00c3\u00a1gi Zsid\u00c3\u00b3 Hitk\u00c3\u00b6zs\u00c3\u00a9gek Sz\u00c3\u00b6vets\u00c3\u00a9ge MAZSIHISZ)", "website": "https://mazsihisz.hu/en", "city": "Budapest", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3522, 48.8566]}, "properties": {"organization": "FEMEN", "website": "https://femen.org/", "city": "Paris", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [8.6821, 50.1109]}, "properties": {"organization": "PRO ASYL", "website": "https://www.proasyl.de/", "city": "Frankfurt (Am Main)", "action_domains": "Migration", "main_category": "Migration"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [8.6821, 50.1109]}, "properties": {"organization": "Intercultural Council (Interkulturelles Rat)", "website": "https://www.coe.int/en/web/interculturalcities", "city": "Frankfurt (Am Main)", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [-77.0369, 38.9072]}, "properties": {"organization": "Freedom House", "website": "https://freedomhouse.org/", "city": "Washington, D.C.", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [19.0402, 47.4979]}, "properties": {"organization": "Hungarian Civil Liberties Union (T\u00c3\u00a1rsas\u00c3\u00a1g a Szabads\u00c3\u00a1gjogok\u00c3\u00a9rt TASZ)", "website": "https://tasz.hu/", "city": "Budapest", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [19.0402, 47.4979]}, "properties": {"organization": "Hungarian Helsinki Committee (Magyar Helsinki Bizotts\u00c3\u00a1g  MHB)", "website": "https://helsinki.hu/", "city": "Budapest", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "International Auschwitz Committee", "website": "https://www.auschwitz.info/en/welcome.html", "city": "Berlin", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Iustitia Association of Polish Judges (Stowarzyszenie S\u00c4\u0099dzi\u00c3\u00b3w Polskich Iustitia Iustitia)", "website": "https://iustitia.pl/", "city": "Warsaw", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Jewish Central Council", "website": "https://jfst.se/for-english-speakers/history-of-the-jewish-community/", "city": "Berlin", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [19.0402, 47.4979]}, "properties": {"organization": "Migration Aid (Hungarian civil organization)", "website": "https://migaid.org/en/", "city": "Budapest", "action_domains": "Migration", "main_category": "Migration"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3522, 48.8566]}, "properties": {"organization": "Reporters Without Borders (RSF)", "website": "https://rsf.org/en", "city": "Paris", "action_domains": "digital media", "main_category": "digital media"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [19.0402, 47.4979]}, "properties": {"organization": "Roma Civil Rights Foundation (Roma Polg\u00c3\u00a1rjogi Alap\u00c3\u00adtv\u00c3\u00a1ny )", "website": "http://www.rpa.ingyenweb.hu/keret.cgi?/start.html", "city": "Budapest", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [12.5683, 55.6761]}, "properties": {"organization": "Save the Children Denmark (Red Barnet)", "website": "https://redbarnet.dk/stoet/", "city": "Copenhagen", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [16.3738, 48.2082]}, "properties": {"organization": "South-East Europe Media Organization (SEEMO)", "website": "https://seemo.org/", "city": "Vienna", "action_domains": "digital media", "main_category": "digital media"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [16.3738, 48.2082]}, "properties": {"organization": "International Press Institute (IPI)", "website": "https://ipi.media/", "city": "Vienna", "action_domains": "digital media", "main_category": "digital media"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [-3.7038, 40.4168]}, "properties": {"organization": "Spanish federation of journalists' association (FAPE)", "website": "https://fape.es/", "city": "Madrid", "action_domains": "digital media", "main_category": "digital media"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [18.0686, 59.3293]}, "properties": {"organization": "Swedish Federation for Lesbian Gay  Bisexual and Transgender Rights (Riksf\u00c3\u00b6rbundet f\u00c3\u00b6r homosexuellas  bisexuellas  transpersoners  queeras och intersexpersoners r\u00c3\u00a4ttigheter  RFSL)", "website": "https://www.rfsl.se/en/", "city": "Stockholm", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [18.0686, 59.3293]}, "properties": {"organization": "Stockholm Pride", "website": "https://www.stockholmpride.org/en/", "city": "Stockholm", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [18.0686, 59.3293]}, "properties": {"organization": "The Nobel Foundation (Nobelstiftelsen)", "website": "https://www.nobelprize.org/the-nobel-prize-organisation/the-nobel-foundation/", "city": "Stockholm", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [21.0122, 52.2297]}, "properties": {"organization": "Themis Judges' Association (Stowarzyszenie S\u00c4\u0099dzi\u00c3\u00b3w Themis Themis)", "website": "https://themis-sedziowie.eu/statut/", "city": "Warsaw", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Bundesnetzwerk B\u00c3\u00bcrgerschaftliches Engagement (BBE)", "website": "https://www.b-b-e.de/", "city": "Berlin", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Europ\u00c3\u00a4ische Akademie Berlin e.V. (EAB)", "website": "https://www.eab-berlin.eu/", "city": "Berlin", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "European Council on Foreign Relations e.V. (ECFR)", "website": "https://ecfr.eu/", "city": "Berlin", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Civil Liberties Union for Europe (Liberties)", "website": "https://www.liberties.eu/en", "city": "Berlin", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [12.3731, 51.3397]}, "properties": {"organization": "We are Europe! e.V.", "website": "https://we-are-europe.org/", "city": "Leipzig", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [7.8421, 4.7999]}, "properties": {"organization": "Gemeinschaft f\u00c3\u00bcr studentischen Austausch in Mittel- und Osteuropa e.V. (GFPS)", "website": "https://www.gfps.org/", "city": "Freiburg", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Ecologic Institut", "website": "https://www.ecologic.eu/de", "city": "Berlin", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [6.9944, 49.5856]}, "properties": {"organization": "Europ\u00c3\u00a4ische Akademie Otzenhausen", "website": "https://www.eao-otzenhausen.de/", "city": "Otzenhausen", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Heinrich-B\u00c3\u00b6ll-Stiftung", "website": "https://www.boell.de/de", "city": "Berlin", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [8.6821, 50.1109]}, "properties": {"organization": "Pulse of Europe", "website": "https://pulseofeurope.eu/", "city": "Frankfurt (Am Main)", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Europa-Union Deutschland (EUD)", "website": "https://www.europa-union.de/", "city": "Berlin", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Junge Europ\u00c3\u00a4ische F\u00c3\u00b6rderalist:innen (JEF)", "website": "https://www.jef.de/", "city": "Berlin", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Institut f\u00c3\u00bcr Europ\u00c3\u00a4ische Politik e.V. (IEP)", "website": "https://iep-berlin.de/", "city": "Berlin", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "United Europe e.V.", "website": "https://www.united-europe.eu/de/", "city": "Berlin", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [1.3405, 0.005252]}, "properties": {"organization": "Citizens of Europe e.V.", "website": "https://citizens-of-europe.eu/", "city": "Berlin", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [30.5234, 50.4501]}, "properties": {"organization": "Shariya's Party", "website": "https://sharij.com.ua/", "city": "Kyiv", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [30.5234, 50.4501]}, "properties": {"organization": "Opposition Platform \u00e2\u0080\u0093 For Life", "website": "https://web.archive.org/web/20220214141120/https://zagittya.com.ua/", "city": "Kyiv", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [30.5234, 50.4501]}, "properties": {"organization": "National Corps", "website": "https://web.archive.org/web/20220701000000/https://nationalcorps.org/", "city": "Kyiv", "action_domains": "Other", "main_category": "Other"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [0.007067, 0.003345]}, "properties": {"organization": "Am\u00e9rica Latina y el Caribe Mejor Sin TLC", "website": "https://americalatinasintlc.org/", "city": "Santiago", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [4.3517, 50.8503]}, "properties": {"organization": "Red EU-LAT", "website": "https://eulatnetwork.org/es/", "city": "Brussels", "action_domains": "Trade/economy", "main_category": "Trade/economy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [135.7681, 35.0116]}, "properties": {"organization": "Support Office for Student Volunteers Activities, Doshisha University", "website": "https://volunteer.doshisha.ac.jp/network/", "city": "Kyoto", "action_domains": "Human/Fundamental Rights", "main_category": "Human/Fundamental Rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [15.9819, 45.815]}, "properties": {"organization": "Croatian Youth Network", "website": "https://mmh.hr/", "city": "Zagreb", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [71.4704, 51.1605]}, "properties": {"organization": "Legal Media-Center", "website": "https://www.lmc.kz/ru", "city": "Astana", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [76.8512, 43.222]}, "properties": {"organization": "Eurasia Foundation of Central Asia", "website": "http://en.ef-ca.kz/", "city": "Almaty", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [20.4489, 44.7866]}, "properties": {"organization": "Center for Cultural Decontamination", "website": "https://www.czkd.org/en/about-us/#:~:text=The%20Center%20for%20Cultural%20Decontamination%20%28CZKD%29%20is%20a,on%20critical%20thinking%2C%20and%20cultural%20and%20artistic%20production.", "city": "Belgrade", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [20.4489, 44.7866]}, "properties": {"organization": "DAH Teatar", "website": "https://en.dahteatarcentar.com/", "city": "Belgrade", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.2558, 43.7696]}, "properties": {"organization": "COSPE ETS", "website": "https://www.cospe.org/", "city": "Firenze", "action_domains": "Migration", "main_category": "Migration"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.1734, 41.3851]}, "properties": {"organization": "Research & Degrowth International", "website": "https://degrowth.org", "city": "Barcelona", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [11.1298, 43.832]}, "properties": {"organization": "Collettivo Di Fabbrica - Lavoratori Gkn Firenze", "website": "https://insorgiamo.org", "city": "Campi Bisenzio", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [4.3517, 50.8503]}, "properties": {"organization": "DiEM25", "website": "https://diem25.org/", "city": "Brussels", "action_domains": "energy/climate/sustainability", "main_category": "energy/climate/sustainability"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [0.008, 40.4406]}, "properties": {"organization": "REEES. University of Pittsburgh", "website": "https://www.ucis.pitt.edu/crees/", "city": "Pittsburgh", "action_domains": "conflict/war", "main_category": "conflict/war"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [20.4489, 44.7866]}, "properties": {"organization": "YUCOM: Lawyers\u0092 Committee for Human Rights", "website": "https://yucom.org.rs/en/home/", "city": "Belgrade", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [76.8512, 43.222]}, "properties": {"organization": "Kazakhstan International Bureau for Human Rights and Rule of Law", "website": "https://bureau.kz/en/", "city": "Almaty", "action_domains": "human/fundamental rights", "main_category": "human/fundamental rights"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [30.5234, 50.4501]}, "properties": {"organization": "VoxUkraine", "website": "https://voxukraine.org/en/", "city": "Kyiv", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [30.5234, 50.4501]}, "properties": {"organization": "The \"New Europe Center\"", "website": "https://neweurope.org.ua/en/", "city": "Kyiv", "action_domains": "Democracy", "main_category": "Democracy"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [30.5234, 50.4501]}, "properties": {"organization": "Europe without Barriers", "website": "https://english.europewb.org.ua/", "city": "Kyiv", "action_domains": "Democracy", "main_category": "Democracy"}}]};
const colorMap = {"Democracy": "#3b82f6", "Human/Fundamental Rights": "#22c55e", "Migration": "#ef4444", "Trade/Economy": "#f59e0b", "Trade/economy": "#a855f7", "conflict/war": "#06b6d4", "digital media": "#10b981", "energy/climate/sustainability": "#e11d48", "human/fundamental rights": "#8b5cf6", "Other": "#8e8e8e"};

map.on('load', () => {
    map.loadImage('https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png', (error, image) => {
        if (error) throw error;
        map.addImage('custom-pin', image);

        map.addSource('orgs', {
            type: 'geojson',
            data: geojson
        });

        map.addLayer({
            id: 'org-pins',
            type: 'symbol',
            source: 'orgs',
            layout: {
                'icon-image': 'custom-pin',
                'icon-size': 0.8,
                'icon-allow-overlap': true
            }
        });

        map.on('click', 'org-pins', (e) => {
            const p = e.features[0].properties;
            const coords = e.features[0].geometry.coordinates;
            const link = p.website ? `<a href="${p.website}" target="_blank">${p.website}</a>` : '';
            new mapboxgl.Popup()
                .setLngLat(coords)
                .setHTML(`<strong>${p.organization}</strong><br/>${p.city}<br/>${link}<br/><em>${p.action_domains}</em>`)
                .addTo(map);
        });

        map.on('mouseenter', 'org-pins', () => {
            map.getCanvas().style.cursor = 'pointer';
        });
        map.on('mouseleave', 'org-pins', () => {
            map.getCanvas().style.cursor = '';
        });

        // Filter logic
        const checkboxes = document.querySelectorAll('.cat-filter');
        checkboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                const active = Array.from(checkboxes)
                                    .filter(c => c.checked)
                                    .map(c => c.getAttribute('data-cat'));
                if (active.length === 0) {
                    map.setFilter('org-pins', ['==', 'main_category', '__none__']);
                } else {
                    map.setFilter('org-pins', ['in', ['get', 'main_category'], ['literal', active]]);
                }
            });
        });
    });
});
</script>
</body>
</html>
